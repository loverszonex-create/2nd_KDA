# ğŸ§ª ì±„íŒ… ìºì‹œ & ë¶ë§ˆí¬ ìŠ¤í¬ë¡¤ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ¯ ìˆ˜ì •ëœ ë‚´ìš©

### âœ… ë¬¸ì œ 1: ì±„íŒ… ìºì‹œ ì‹œìŠ¤í…œ
- **localStorage ìë™ ì €ì¥/ë¡œë“œ** (24ì‹œê°„ ë³´ê´€)
- **Supabase ë°±ì—…** (7ì¼ ë³´ê´€, ì„ íƒì )
- ìƒˆë¡œê³ ì¹¨í•´ë„ ëŒ€í™” ìœ ì§€!

### âœ… ë¬¸ì œ 2: ë¶ë§ˆí¬ ë©”ì‹œì§€ ìŠ¤í¬ë¡¤
- ìºì‹œ ë¡œë“œ í›„ ë¶ë§ˆí¬ ìŠ¤í¬ë¡¤ ì‹¤í–‰
- íƒ€ì´ë° ë¬¸ì œ í•´ê²°
- ë©”ì‹œì§€ ê°•ì¡° íš¨ê³¼ ì¶”ê°€

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### í…ŒìŠ¤íŠ¸ 1: ì±„íŒ… ìºì‹œ (localStorage)

#### 1ë‹¨ê³„: ëŒ€í™” ì‹œì‘
```bash
1. ë¸Œë¼ìš°ì €: http://localhost:3000
2. ì‚¼ì„±ì „ì ì±„íŒ…ë°© ì…ì¥
3. AIì™€ ëŒ€í™” (2-3ê°œ ì§ˆë¬¸)
```

#### 2ë‹¨ê³„: ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸ (F12)
```
[ChatPage] ğŸ’¾ ìºì‹œ ì €ì¥: 5ê°œ ë©”ì‹œì§€
[Cache] ğŸ’¾ localStorage ì €ì¥: ì‚¼ì„±ì „ì, 5ê°œ ë©”ì‹œì§€
```

#### 3ë‹¨ê³„: ìƒˆë¡œê³ ì¹¨ (F5)
```
ì˜ˆìƒ ê²°ê³¼:
- âœ… ëŒ€í™” ë‚´ì—­ì´ ê·¸ëŒ€ë¡œ ìœ ì§€ë¨
- ë¸Œë¼ìš°ì € ì½˜ì†”:
  [ChatPage] ğŸ”„ ìºì‹œ ë¡œë“œ ì‹œì‘: ì‚¼ì„±ì „ì
  [Cache] ğŸ“¦ localStorage ë¡œë“œ: ì‚¼ì„±ì „ì, 5ê°œ ë©”ì‹œì§€
  [ChatPage] âœ… ìºì‹œì—ì„œ 5ê°œ ë©”ì‹œì§€ ë¡œë“œ
```

#### 4ë‹¨ê³„: localStorage í™•ì¸
```javascript
// ë¸Œë¼ìš°ì € ì½˜ì†”
localStorage.getItem('chat_history_ì‚¼ì„±ì „ì')
// ì¶œë ¥: JSON ë°ì´í„° í™•ì¸
```

---

### í…ŒìŠ¤íŠ¸ 2: Supabase ë°±ì—… (ì„ íƒì )

#### ì‚¬ì „ ì¡°ê±´
1. `.env` íŒŒì¼ì— Supabase í™˜ê²½ë³€ìˆ˜ ì„¤ì •
2. `supabase_chat_history_schema.sql` ì‹¤í–‰

#### 1ë‹¨ê³„: ëŒ€í™” ì‹œì‘
```bash
1. ì‚¼ì„±ì „ì ì±„íŒ…ë°©ì—ì„œ ëŒ€í™”
2. ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸:
   [Cache] âœ… Supabase ì €ì¥ ì™„ë£Œ: ì‚¼ì„±ì „ì
```

#### 2ë‹¨ê³„: localStorage ì‚­ì œ í›„ ìƒˆë¡œê³ ì¹¨
```javascript
// ë¸Œë¼ìš°ì € ì½˜ì†”
localStorage.removeItem('chat_history_ì‚¼ì„±ì „ì')
location.reload()
```

#### 3ë‹¨ê³„: Supabaseì—ì„œ ë³µêµ¬ í™•ì¸
```
ì˜ˆìƒ ê²°ê³¼:
- âœ… Supabaseì—ì„œ ëŒ€í™” ë³µêµ¬ë¨
- ë¸Œë¼ìš°ì € ì½˜ì†”:
  [Cache] ğŸ”„ Supabaseì—ì„œ ë¡œë“œ ì‹œë„: ì‚¼ì„±ì „ì
  [Cache] âœ… Supabaseì—ì„œ ë³µêµ¬: ì‚¼ì„±ì „ì, 5ê°œ ë©”ì‹œì§€
```

#### 4ë‹¨ê³„: Supabase í…Œì´ë¸” í™•ì¸
```
Supabase Dashboard â†’ Table Editor â†’ chat_history
- session_id í™•ì¸
- messages ì»¬ëŸ¼ì— JSONB ë°ì´í„° í™•ì¸
```

---

### í…ŒìŠ¤íŠ¸ 3: ë¶ë§ˆí¬ ë©”ì‹œì§€ ìŠ¤í¬ë¡¤

#### 1ë‹¨ê³„: ë©”ì‹œì§€ ë¶ë§ˆí¬
```bash
1. ì‚¼ì„±ì „ì ì±„íŒ…ë°©ì—ì„œ AIì™€ ëŒ€í™” (3-4ê°œ)
2. AI ë‹µë³€ ì¤‘ í•˜ë‚˜ë¥¼ ë¶ë§ˆí¬ (ìš°ì¸¡ í•˜ë‹¨ ì•„ì´ì½˜)
3. âœ… ë¶ë§ˆí¬ ì•„ì´ì½˜ì´ íŒŒë€ìƒ‰ìœ¼ë¡œ ë³€í•¨
```

#### 2ë‹¨ê³„: HomePage ë¶ë§ˆí¬ íƒ­ì—ì„œ í™•ì¸
```bash
1. í™ˆìœ¼ë¡œ ì´ë™ (â†)
2. í•˜ë‹¨ íƒ­ â†’ "ë¶ë§ˆí¬" í´ë¦­
3. ì €ì¥ëœ ë¶ë§ˆí¬ í™•ì¸
```

#### 3ë‹¨ê³„: ë¶ë§ˆí¬ í´ë¦­ (ì¤‘ìš”!)
```bash
1. ë¶ë§ˆí¬ ì¹´ë“œ í´ë¦­
2. âœ… ì‚¼ì„±ì „ì ì±„íŒ…ë°©ìœ¼ë¡œ ì´ë™
3. âœ… ë¶ë§ˆí¬í•œ ë©”ì‹œì§€ë¡œ ìë™ ìŠ¤í¬ë¡¤
4. âœ… 2ì´ˆê°„ ì—°í•œ ë³´ë¼ìƒ‰ ë°°ê²½ìœ¼ë¡œ ê°•ì¡°
```

#### 4ë‹¨ê³„: ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸
```
[ChatPage] ğŸ”„ ìºì‹œ ë¡œë“œ ì‹œì‘: ì‚¼ì„±ì „ì
[Cache] ğŸ“¦ localStorage ë¡œë“œ: ì‚¼ì„±ì „ì, 5ê°œ ë©”ì‹œì§€
[ChatPage] âœ… ìºì‹œì—ì„œ 5ê°œ ë©”ì‹œì§€ ë¡œë“œ
[ChatPage] ğŸ¯ ë¶ë§ˆí¬ ë©”ì‹œì§€ë¡œ ìŠ¤í¬ë¡¤ ì‹œë„: 1699876543210
[ChatPage] âœ… ë¶ë§ˆí¬ ë©”ì‹œì§€ ë°œê²¬, ìŠ¤í¬ë¡¤ ì‹¤í–‰
```

#### 5ë‹¨ê³„: ProfilePageì—ì„œë„ í…ŒìŠ¤íŠ¸
```bash
1. ProfilePage â†’ ë¶ë§ˆí¬ ë©”ë‰´
2. ë¶ë§ˆí¬ í´ë¦­
3. âœ… ë™ì¼í•˜ê²Œ ìŠ¤í¬ë¡¤ ì‘ë™
```

---

### í…ŒìŠ¤íŠ¸ 4: ì—£ì§€ ì¼€ì´ìŠ¤

#### 4-1. ìºì‹œ ì—†ì´ ë¶ë§ˆí¬ í´ë¦­
```bash
1. localStorage ì‚­ì œ:
   localStorage.clear()
2. ë¶ë§ˆí¬ í´ë¦­
3. ì˜ˆìƒ ê²°ê³¼:
   - âš ï¸ ë©”ì‹œì§€ê°€ ì—†ì–´ì„œ ìŠ¤í¬ë¡¤ ì•ˆ ë¨
   - ì½˜ì†”: [ChatPage] âš ï¸ ë¶ë§ˆí¬ ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
```

#### 4-2. 24ì‹œê°„ í›„ ìºì‹œ ë§Œë£Œ
```javascript
// localStorageì˜ timestampë¥¼ 25ì‹œê°„ ì „ìœ¼ë¡œ ë³€ê²½
const data = JSON.parse(localStorage.getItem('chat_history_ì‚¼ì„±ì „ì'))
data.timestamp = new Date(Date.now() - 25*60*60*1000).toISOString()
localStorage.setItem('chat_history_ì‚¼ì„±ì „ì', JSON.stringify(data))

// ìƒˆë¡œê³ ì¹¨
location.reload()

// ì˜ˆìƒ ê²°ê³¼:
// - âš ï¸ localStorage ë§Œë£Œë¨
// - ì½˜ì†”: [Cache] â° localStorage ë§Œë£Œ (25.0ì‹œê°„)
// - Supabaseì—ì„œ ë³µêµ¬ ì‹œë„ (ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´)
```

#### 4-3. ì—¬ëŸ¬ ì¢…ëª© ë™ì‹œ í…ŒìŠ¤íŠ¸
```bash
1. ì‚¼ì„±ì „ì, SKí•˜ì´ë‹‰ìŠ¤, ì‚¼ì„±SDI ê°ê° ëŒ€í™”
2. ê° ì¢…ëª©ì˜ ë©”ì‹œì§€ ë¶ë§ˆí¬
3. localStorage í™•ì¸:
   - chat_history_ì‚¼ì„±ì „ì
   - chat_history_SKí•˜ì´ë‹‰ìŠ¤
   - chat_history_ì‚¼ì„±SDI
4. ê° ë¶ë§ˆí¬ í´ë¦­ â†’ í•´ë‹¹ ë©”ì‹œì§€ë¡œ ìŠ¤í¬ë¡¤
```

---

## ğŸ“Š ì˜ˆìƒ ì½˜ì†” ë¡œê·¸

### ì •ìƒ ì‘ë™ ì‹œ
```
[Cache] âœ… Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ
[ChatPage] ğŸ”„ ìºì‹œ ë¡œë“œ ì‹œì‘: ì‚¼ì„±ì „ì
[Cache] ğŸ“¦ localStorage ë¡œë“œ: ì‚¼ì„±ì „ì, 3ê°œ ë©”ì‹œì§€
[ChatPage] âœ… ìºì‹œì—ì„œ 3ê°œ ë©”ì‹œì§€ ë¡œë“œ
[ChatPage] ğŸ’¾ ìºì‹œ ì €ì¥: 4ê°œ ë©”ì‹œì§€
[Cache] ğŸ’¾ localStorage ì €ì¥: ì‚¼ì„±ì „ì, 4ê°œ ë©”ì‹œì§€
[Cache] âœ… Supabase ì €ì¥ ì™„ë£Œ: ì‚¼ì„±ì „ì
[ChatPage] ğŸ¯ ë¶ë§ˆí¬ ë©”ì‹œì§€ë¡œ ìŠ¤í¬ë¡¤ ì‹œë„: 1699876543210
[ChatPage] âœ… ë¶ë§ˆí¬ ë©”ì‹œì§€ ë°œê²¬, ìŠ¤í¬ë¡¤ ì‹¤í–‰
```

### localStorageë§Œ ì‚¬ìš© ì‹œ (Supabase ì—†ìŒ)
```
[Cache] âš ï¸ Supabase í™˜ê²½ë³€ìˆ˜ ì—†ìŒ, localStorageë§Œ ì‚¬ìš©
[ChatPage] ğŸ”„ ìºì‹œ ë¡œë“œ ì‹œì‘: ì‚¼ì„±ì „ì
[Cache] ğŸ“¦ localStorage ë¡œë“œ: ì‚¼ì„±ì „ì, 3ê°œ ë©”ì‹œì§€
[ChatPage] âœ… ìºì‹œì—ì„œ 3ê°œ ë©”ì‹œì§€ ë¡œë“œ
```

### ìºì‹œ ì—†ìŒ
```
[ChatPage] ğŸ”„ ìºì‹œ ë¡œë“œ ì‹œì‘: ì‚¼ì„±ì „ì
[Cache] âŒ ìºì‹œ ì—†ìŒ: ì‚¼ì„±ì „ì
[ChatPage] âš ï¸ ìºì‹œ ì—†ìŒ, ê¸°ë³¸ ë©”ì‹œì§€ ì‚¬ìš©
```

---

## ğŸ› ë¬¸ì œ ë°œìƒ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âŒ ìƒˆë¡œê³ ì¹¨ ì‹œ ëŒ€í™”ê°€ ì‚¬ë¼ì§
- [ ] ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ `[Cache]` ë¡œê·¸ í™•ì¸
- [ ] localStorageì— ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸:
  ```javascript
  localStorage.getItem('chat_history_ì‚¼ì„±ì „ì')
  ```
- [ ] ë¸Œë¼ìš°ì €ì˜ localStorageê°€ ë¹„í™œì„±í™”ë˜ì–´ ìˆì§€ ì•Šì€ì§€ í™•ì¸
- [ ] ì‹œí¬ë¦¿ ëª¨ë“œê°€ ì•„ë‹Œì§€ í™•ì¸ (ì‹œí¬ë¦¿ ëª¨ë“œëŠ” localStorage íœ˜ë°œì„±)

### âŒ ë¶ë§ˆí¬ í´ë¦­ ì‹œ ìŠ¤í¬ë¡¤ ì•ˆ ë¨
- [ ] ì½˜ì†”ì—ì„œ `[ChatPage] ğŸ¯ ë¶ë§ˆí¬ ë©”ì‹œì§€ë¡œ ìŠ¤í¬ë¡¤` ë¡œê·¸ í™•ì¸
- [ ] ìºì‹œê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸:
  ```
  [ChatPage] âœ… ìºì‹œì—ì„œ Nê°œ ë©”ì‹œì§€ ë¡œë“œ
  ```
- [ ] ë©”ì‹œì§€ IDê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸:
  ```javascript
  document.getElementById('message-1699876543210')
  ```
- [ ] ë¶ë§ˆí¬ëœ ë©”ì‹œì§€ê°€ ìºì‹œì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

### âŒ Supabase ì €ì¥ ì‹¤íŒ¨
- [ ] `.env` íŒŒì¼ì˜ í™˜ê²½ë³€ìˆ˜ í™•ì¸:
  - `VITE_SUPABASE_URL`
  - `VITE_SUPABASE_ANON_KEY`
- [ ] Supabase í…Œì´ë¸”ì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸ (Table Editor)
- [ ] RLS ì •ì±…ì´ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
- [ ] ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ Supabase API í˜¸ì¶œ í™•ì¸

---

## âœ… ì„±ê³µ ê¸°ì¤€

### í•„ìˆ˜ (localStorage)
- [x] ìƒˆë¡œê³ ì¹¨ ì‹œ ëŒ€í™” ìœ ì§€ (24ì‹œê°„)
- [x] ë¶ë§ˆí¬ í´ë¦­ ì‹œ í•´ë‹¹ ë©”ì‹œì§€ë¡œ ìŠ¤í¬ë¡¤
- [x] ë©”ì‹œì§€ ê°•ì¡° íš¨ê³¼ (2ì´ˆê°„ ë³´ë¼ìƒ‰ ë°°ê²½)
- [x] ì—¬ëŸ¬ ì¢…ëª© ê°œë³„ ìºì‹œ ê´€ë¦¬

### ì„ íƒì  (Supabase)
- [ ] Supabaseì— ìë™ ë°±ì—…
- [ ] localStorage ì‚­ì œ í›„ Supabaseì—ì„œ ë³µêµ¬
- [ ] 7ì¼ê°„ ë°ì´í„° ë³´ê´€

---

## ğŸš€ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì‹¤í–‰:

```javascript
// 1. ìºì‹œ ìƒíƒœ í™•ì¸
console.log('=== ìºì‹œ ìƒíƒœ ===')
console.log('ì‚¼ì„±ì „ì:', localStorage.getItem('chat_history_ì‚¼ì„±ì „ì') ? 'O' : 'X')
console.log('SKí•˜ì´ë‹‰ìŠ¤:', localStorage.getItem('chat_history_SKí•˜ì´ë‹‰ìŠ¤') ? 'O' : 'X')
console.log('ì„¸ì…˜ ID:', localStorage.getItem('chat_session_id'))

// 2. ìºì‹œ ë°ì´í„° í™•ì¸
const data = JSON.parse(localStorage.getItem('chat_history_ì‚¼ì„±ì „ì'))
console.log('ë©”ì‹œì§€ ê°œìˆ˜:', data?.messages?.length)
console.log('ì €ì¥ ì‹œê°„:', data?.timestamp)

// 3. ë¶ë§ˆí¬ í™•ì¸
const bookmarks = JSON.parse(localStorage.getItem('bookmarks'))
console.log('ë¶ë§ˆí¬ ê°œìˆ˜:', bookmarks?.length)
console.log('ë¶ë§ˆí¬ ëª©ë¡:', bookmarks?.map(b => b.stockName))

// 4. ì „ì²´ ìºì‹œ ì‚­ì œ (í…ŒìŠ¤íŠ¸ìš©)
// localStorage.clear()
// location.reload()
```

ì™„ë£Œ! ğŸ‰

